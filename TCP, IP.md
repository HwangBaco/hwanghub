HTTP는 애플리케이션 계층에서 웹 서비스 통신에 사용이 되는 웹 통신 프로토콜이다. 이 HTTP의 성능이 좋아질수록 웹 성능도 좋아진다. 따라서 이 프로토콜을 극대화하면 웹 서버가 클라이언트에게 콘텐츠를 최대 속도와 최저 지연 시간으로 전달할 수 있다. 프로토콜 최적화는 웹 콘텐츠를 더욱 빠르게 요척하고 응답하도록 프로토콜을 업그레이드 하는 과정이다. 그럼 어떤 프로토콜이 있을까?

## TCP/IP 프로토콜

웹에서는 TCP/IP 프로토콜의 일종인 HTTP를 사용해 콘텐츠를 전달한다. 이 HTTP는 애플리케이션 계층에 속하고 TCP는 전송 계층에 속한다.

- 전송 계층 : 네트워크상에서 송신자와 수신자 사이에 데이터 전송을 보장하는 역할
- 애플리케이션 계층 : 인터넷으로 웹 서핑을 하는 것처럼 실제 네트워크상에서 소프트웨어와 사용자의 상호 연동을 담당

이 계층은 독립적인 것이 아니라 상위 계층인 애플리케이션 계층이 하위 계층인 전송 계층을 바탕으로 운용되는 구조이다.

TCP 네트워크의 대표적인 성능 지표는 대역폭과 지연 시간이다.

- 대역폭 : 특정 시간 동안 많은 네트워크 트래픽을 보낼 수 있는지 시간당 전송량을 의미
- 지연 시간 : 클라이언트와 서버 간 콘텐츠를 전달하는 물리적인 시간
- RTT(Round Trip Time) : 서버와 클라이언트 두 호스트를 모두 왕복하는데 걸리는 지연 시간

이렇게 TCP와 웹 성능은 밀접한 관련이 있기에 TCP 성능이 나빠지면 웹 성능도 영향을 받는다. 이런 성능 저하 요소를 해결하는 TCP 기술들은 무엇이 있을까?

#### TCP 혼잡 제어(Congestion Control)

TCP 네트워크의 통신량이 실제 처리량보다 많아서 문제가 발생하는 것이 TCP 혼잡 붕괴(Congestion Collapse)이다. 이는 인터넷에 연결된 호스트들이 최대한 많은 정보를 전송하려고 많은 네트워크 패킷을 보내기 때문에 발생하는 것이다. 이를 해결하기 위해 TCP 혼잡 제어 기술을 사용한다.

- TCP 혼합 제어(Congestion Control) : TCP 네트워크의 통신량을 조절하여 TCP 네트워크가 혼잡해지지 않도록 하는 방식

TCP 혼잡 제어의 대표 기술들은 다음과 같다.

#### 느린 시작(Slow Start)

TCP 연결이 시작되면 전송 가능한 버퍼의 양인 혼잡 윈도우(Congestion Window, CWND)의 초깃값을 작게 설정하여 전송한다. 통신이 시작되면 패킷 1개만 보내고 정상 응답 ACK가 오면 2배를 보내는 방식으로 보낸다. 이를 패킷 유실(Packet Drop)이 발생하기 전까지 반복한다.

느린 시작 기술을 통해 네트워크가 수용할 수 있는 혼잡 윈도우의 크기를 파악하면 그 이상의 패킷을 보내지 않는 것이다. 이 기술은 HTTP에서도 사용되며 웹 사이트에 접속한 브라우저는 처음부터 많은 패킷을 보내지 않는다.

#### 빠른 재전송(Fast Retransmit)

- 먼저 도착해야 하는 패킷이 도착하지 않고 다음 패킷이 도착한 경우에도 수신자가 일단 ACK 패킷을 보내는 방식
- 중간에 패킷이 하나 손실되면 송신자는 중복된 ACK 패킷을 통해 이를 감지하고 정상적으로 전송되지 않은 패킷을 재전송
- 중복된 패킷을 3개 받으면 반드시 손실된 패킷을 재전송하며, 동시에 혼잡 제어가 필요한 상황임을 인식해서 혼잡 윈도우 창 크기를 줄이는 작어도 실행함

#### 흐름 제어(Flow Control)

- TCP 송신자가 데이터를 너무 빠르게 혹은 너무 많이 전송하여 수신자의 버퍼가 오버플로(overflow)되는 현상을 방지하는 기술

수신자는 수신 버퍼(receive buffer)를 가지고 있는데 이로 인해 상위 계층으로 세그먼트를 보내는 애플리케이션 프로세스에서 데이터를 읽는 속도가 느려질 수 있다. 따라서 송신자가 데이터를 전송하는 속도를 애플리케이션 프로세스를 읽는 속도와 유사한 수준으로 만들어 트래픽 수신 속도를 송신 속도와 일치시키는 기술

이렇게 TCP/IP 프로토콜 외에도 중요한 HTTP 프로토콜이 있지만 이는 따로 작성하기에 생략한다.